<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 파일 넣기 확인 다시 해야 함, 작성자랑 members_no 못하겠음, 댓글 넣기 기능 추가해야 함 -->
<!-- story_no, members_no, story_title, story_content, story_re_ref, story_re_lev, story_re_seq, story_cnt, story_date, storyfilename, storyuploadfile, ckeditorfuncnum -->
 <mapper namespace="storyDAOTemplate" >
	
	<insert id="insertStory">
		<selectKey keyProperty="story_no" resultType="int" order="BEFORE">
			select story_seq.nextval from dual
		</selectKey>
			insert into story(story_no, story_title, story_content)
			values(
				#{story_no}, #{story_title}, #{story_content})
	</insert>

	<update id="updateStory">
		update story set story_title=#{story_title}, story_content=#{story_content} where story_no=#{story_no}
	</update>

	<delete id="deleteStory">
		delete story where story_no=#{story_no}
	</delete>

	<select id="getStory" resultType="com.tjoeunit.biz.story.StoryVO">
		select * from story where story_no=#{story_no}
	</select>

	<select id="getStoryList" resultType="com.tjoeunit.biz.story.StoryVO">
		select * from story order by story_no desc
	</select>
	
</mapper>